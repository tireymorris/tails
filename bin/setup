#!/usr/bin/env ruby
require 'fileutils'

puts '==> Setting up Tails ðŸ¦Š'

unless File.exist?('.env')
  require 'securerandom'
  env_content = File.read('env.example')
  env_content.gsub!('your-secret-key-here', SecureRandom.hex(64))
  File.write('.env', env_content)
  puts 'âœ“ Generated .env with secure SESSION_SECRET'
end

puts '==> Installing dependencies...'
system('bundle install') || abort('Failed to install dependencies')

FileUtils.mkdir_p('db')
puts '==> Running migrations...'
system('bundle exec rake db:migrate') || abort('Failed to run migrations')

puts '==> Seeding database...'
system('bundle exec rake db:seed')

puts "\nâœ“ Setup complete!"
puts "\nStart: ./bin/dev"
puts "Demo: demo@example.com / password123"
